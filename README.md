# OrganizationAPI

---

Тестовое задание для Hitalent. API для управления подразделениями организации

## Запуск

---

1. Скопировать репозиторий:

```bash
git clone https://github.com/Eleverkuhn/OrganizationAPI
cd OrganizationAPI
```

2. Запустить Docker:

```bash
docker compose up --build
```

3. Запуск тестов:

```bash
docker exec fastapi pytest .
```

4. Открыть OpenAPI [схему](http://127.0.0.1:8000/docs)

## Стек

---

- **Backend**: FastAPI (async)
- **Database**: PostgreSQL
- **ORM**: SQLAlchemy
- **Migrations**: Alembic
- **Project Manager**: uv
- Docker / docker-compose

### Использованные библиотеки

---

- `fastapi[standard]`
- `SQLAlchemy`
- `asyncpg`
- `psycopg[binary]`
- `alembic`
- `loguru`
- `pytest`
- `pytest-asyncio`

## Архитектура проекта

---

Приложение состоит из трёх основных слоёв:

1. **Data**. Здесь содержатся все модули, необходимые для работы с базой данных, а также скрипт для загрузки данных на этапе запуска контейнера
2. **Service**. Промежуточный слой, в котором реализована валидация, логирование, бизнес-логика. Связывает между собой _Data_ и _Web_
3. **Web**. Здесь хранятся функции эндпоинты. Каждая функция вызывает соответствующий _Service_
   Остальные модули являются вспомогательными

## Примечание

---

В тестах пришлось копипастить функции для создания тестовых данных, т.к. фикстуры в `pytest-asyncio` не загружали данные корректно (связи в алхимии не подгружались)

`.env` файл содержит фейковые переменные окружения. Я добавил его в репозиторий, чтобы не нужно было создавать вручную
